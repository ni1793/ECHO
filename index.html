<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>~* 蔚藍地帶 *~ 阿傑的個人空間 - j_ray_05</title>
    <style>
        :root { 
            --retro-blue: #0288D1; 
            --retro-dark: #263238; 
            --apple-black: #000000;
            --apple-text: #f5f5f7;
            --accent-blue: #0071e3;
        }
        * { box-sizing: border-box; }
        body { margin: 0; padding: 0; overflow-x: hidden; transition: background 0.8s cubic-bezier(0.4, 0, 0.2, 1); }

        /* --- 2006 復古主題 --- */
        body.v2006 { background: #455A64; font-family: "新細明體", "PMingLiU", serif; }
        #retro-container { width: 950px; margin: 20px auto; background: #FFF; border: 1px solid #000; box-shadow: 10px 10px 0 rgba(0,0,0,0.3); position: relative; }
        
        .top-ad-banner { height: 60px; background: #ffff00; border-bottom: 1px solid #000; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .ad-text { color: #f00; font-weight: bold; animation: blink 0.5s infinite; font-size: 14px; }

        header { background: var(--retro-blue); height: 180px; color: white; padding: 40px; display: flex; align-items: flex-end; border-bottom: 6px solid #01579B; position: relative; }
        header h1 { margin: 0; font-size: 32px; letter-spacing: 4px; text-shadow: 2px 2px #000; }
        .counter { position: absolute; top: 10px; right: 10px; background: #000; color: #0F0; font-family: 'Courier New', Courier, monospace; padding: 5px; font-size: 12px; }

        .nav { background: var(--retro-dark); color: white; display: flex; padding: 12px; justify-content: center; gap: 30px; font-weight: bold; }
        .nav span { cursor: pointer; transition: 0.2s; }
        .nav span:hover { color: #FFD54F; text-decoration: underline; }

        .layout { display: flex; padding: 20px; gap: 20px; background: #F5F5F5; }
        .sidebar { width: 230px; }
        .content { flex: 1; background: #FFF; border: 1px solid #CCC; padding: 25px; min-height: 1200px; }

        .box { border: 1px solid #B0BEC5; background: #FFF; margin-bottom: 20px; }
        .box-title { background: #CFD8DC; padding: 6px; font-weight: bold; font-size: 13px; border-bottom: 1px solid #B0BEC5; }
        .box-body { padding: 10px; font-size: 13px; line-height: 1.6; }

        /* MP3 Player */
        .mp3-player { background: #333; padding: 8px; border: 2px outset #666; font-family: monospace; }
        .lcd-screen { background: #000; border: 2px inset #222; padding: 6px; height: 54px; position: relative; overflow: hidden; }
        .lcd-status { color: #0F0; font-size: 11px; line-height: 1.2; }
        .lcd-fault { display: none; color: #F00; font-weight: bold; font-size: 13px; text-align: center; padding-top: 5px; animation: blink 0.3s infinite; }
        .player-controls { display: flex; gap: 4px; margin-top: 8px; }
        .p-btn { flex: 1; background: #BBB; border: 2px outset #EEE; color: #000; font-size: 10px; cursor: pointer; padding: 3px; text-align: center; font-weight: bold; }
        .p-btn:active { border-style: inset; background: #888; }
        .progress-bar { width: 100%; height: 5px; background: #111; margin-top: 6px; position: relative; border: 1px solid #444; }
        .progress-fill { width: 0%; height: 100%; background: #0F0; box-shadow: 0 0 5px #0F0; }

        /* Posts */
        .post-card { border-bottom: 1px dashed #CCC; padding: 15px 0; }
        .post-card h3 { margin: 0; color: var(--retro-blue); cursor: pointer; font-size: 18px; }
        .post-meta { font-size: 11px; color: #888; margin-top: 5px; }

        /* Comment Area */
        .comment-area { background: #F9FBE7; padding: 20px; margin-top: 30px; border: 1px solid #DCE775; }
        .comment-item { border-bottom: 1px solid #E6EE9C; padding: 10px 0; font-size: 12px; }
        .c-user { font-weight: bold; color: #2E7D32; }
        .spam-ad { color: #f00; font-style: italic; font-size: 11px; margin-top: 5px; }

        /* --- 2026 Apple 主題 --- */
        #cyber-container { 
            display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; 
            background: #000; color: var(--apple-text); z-index: 10000; 
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", sans-serif;
            overflow-y: auto; overflow-x: hidden;
        }
        .apple-nav { height: 52px; background: rgba(0, 0, 0, 0.7); backdrop-filter: saturate(180%) blur(20px); border-bottom: 0.5px solid rgba(255,255,255,0.1); position: sticky; top: 0; z-index: 100; display: flex; align-items: center; padding: 0 30px; font-weight: 500; font-size: 14px; letter-spacing: 0.1em; }
        .apple-main { max-width: 980px; margin: 0 auto; padding: 160px 20px 100px; }
        .apple-hero { text-align: left; margin-bottom: 120px; animation: fadeInUp 1.2s ease; }
        .apple-title { font-size: 80px; font-weight: 700; letter-spacing: -0.02em; line-height: 1.05; margin: 0 0 30px; background: linear-gradient(180deg, #fff 0%, #a1a1a6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .apple-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 100px; }
        .apple-card { background: #1c1c1e; padding: 40px; border-radius: 24px; border: 0.5px solid rgba(255,255,255,0.1); transition: 0.3s; }
        .apple-card:hover { transform: translateY(-5px); border-color: rgba(255,255,255,0.3); }

        #popup-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(40px); z-index: 30000; justify-content: center; align-items: center; }
        .popup-window { background: rgba(28, 28, 30, 0.9); border: 0.5px solid rgba(255,255,255,0.1); padding: 40px; border-radius: 28px; color: #fff; max-width: 480px; text-align: center; font-family: -apple-system, sans-serif; animation: scaleIn 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        .confirm-btn { background: #fff; color: #000; border: none; padding: 14px 28px; border-radius: 12px; cursor: pointer; font-weight: 700; width: 100%; font-size: 17px; margin-top: 20px; }

        @keyframes blink { 50% { opacity: 0; } }
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="v2006">

<audio id="bgm" src="music.mp3" loop preload="auto"></audio>

<div id="retro-container">
    <div class="top-ad-banner">
        <marquee scrollamount="10" class="ad-text">
            【恭喜】你是本日第 999,999 位訪客！點此領取免費 Nokia N73 ！！！ ⚡⚡ 震撼！內湖區某工程師竟因這份工作... ⚡⚡ 徵信社推薦 ⚡⚡ 下載即得黃金會員 ⚡⚡
        </marquee>
    </div>

    <header>
        <div>
            <h1>~* 蔚藍地帶 *~</h1>
            <p>j_ray_05 的生活碎片 | CT-0912 | <span id="clock">12:00:00</span></p>
        </div>
        <div class="counter">累計訪客：0085732</div>
    </header>

    <nav class="nav">
        <span onclick="route('home')">首頁日誌</span>
        <span onclick="route('guestbook')">留言板 (99+)</span>
        <span onclick="sysAlert('錯誤：相簿模組損毀，請聯繫站長。')">我的相簿</span>
        <span onclick="sysAlert('地圖 API 讀取失敗。')">好友地圖</span>
    </nav>

    <div class="layout">
        <aside class="sidebar">
            <div class="box">
                <div class="box-title">About Me</div>
                <div class="box-body" style="text-align:center;">
                    <div style="width:100px; height:100px; background:#DDD; margin:0 auto; display:flex; align-items:center; justify-content:center; border:1px solid #BBB;">
                        <img src="https://api.dicebear.com/7.x/pixel-art/svg?seed=Ray" alt="Avatar" style="width:100%">
                    </div>
                    <p><b>阿傑 (Ray)</b><br>社會新鮮人 / 工程師<br>熱愛吉他與冰美式<br><br>
                    <img src="https://img.shields.io/badge/Status-Online-green" alt="online"></p>
                </div>
            </div>

            <div class="box">
                <div class="box-title">MP3 Player</div>
                <div class="box-body">
                    <div class="mp3-player">
                        <div class="lcd-screen">
                            <div id="lcd-normal" class="lcd-status">[READY]<br><marquee scrollamount="2" style="width:180px;">周杰倫 - 千里之外.mp3</marquee></div>
                            <div id="lcd-error" class="lcd-fault">[ ERROR: CDR-404 ]<br>READ FAILURE</div>
                        </div>
                        <div class="progress-bar"><div id="p-fill" class="progress-fill"></div></div>
                        <div class="player-controls">
                            <div class="p-btn" onclick="playMusic()">▶ PLAY</div>
                            <div class="p-btn" onclick="pauseMusic()">⏸ PAUSE</div>
                            <div class="p-btn" onclick="stopMusic()">■ STOP</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="box"><div class="box-title">我的好友</div><div class="box-body" id="friend-list"></div></div>
        </aside>

        <main class="content" id="app"></main>
    </div>

    <div style="text-align:center; padding:10px; border-top:1px solid #EEE;">
        <img src="https://img.shields.io/badge/IE6_Optimized-Best_View-blue" alt="ie6">
        <img src="https://img.shields.io/badge/Built_with-Macromedia_Flash-orange" alt="flash">
    </div>
</div>

<div id="cyber-container">
    <div class="apple-nav"><span style="opacity: 0.8;">CEREBROTECH SYSTEMS PROTOCOL // CT-0912</span></div>
    <div class="apple-main">
        <div class="apple-hero">
            <h1 class="apple-title">時間不是線性的，<br>而是緩存。</h1>
            <p style="font-size:32px; color:#86868b; line-height:1.4; max-width:700px;">當你閱讀這段文字時，2006 年的生理主體已經完成了 98.4% 的數位遷移。我們不再受限於肉體，而是永恆的位元。</p>
            <div style="margin-top: 40px;">
                <button class="apple-btn" style="background:#fff; color:#000; border:none; border-radius:980px; padding:18px 40px; font-weight:600; font-size:18px; cursor:pointer;" onclick="triggerBreach()">存取核心意識數據</button>
            </div>
        </div>
        <div class="apple-grid">
            <div class="apple-card">
                <h3 style="color:#0071e3; margin-top:0;">01. 意識數位化</h3>
                <p style="color:#a1a1a6;">透過 CT-0912 協議，將情感、記憶與痛苦轉化為可索引的資料庫。</p>
            </div>
            <div class="apple-card">
                <h3 style="color:#0071e3; margin-top:0;">02. 時空同步</h3>
                <p style="color:#a1a1a6;">2006 與 2026 之間的屏障已經崩塌。你可以在緩存中重溫每一秒。</p>
            </div>
        </div>
    </div>
</div>

<div id="popup-overlay">
    <div class="popup-window">
        <h2 style="margin-top:0;">SYSTEM EXCEPTION</h2>
        <p style="color:#a1a1a6; line-height:1.5;">偵測到非授權的時空節點回傳。CerebroTech 核心正在重新配置視覺層，以防止意識排斥反應。系統將執行緊急重設。</p>
        <button class="confirm-btn" onclick="rebootSystem()">同步並返回</button>
    </div>
</div>

<script>
    const audio = document.getElementById('bgm');
    const normalLCD = document.getElementById('lcd-normal');
    const errorLCD = document.getElementById('lcd-error');
    const pFill = document.getElementById('p-fill');
    let hasReturnedFromFuture = false;

    // 15 篇日誌文章
    const blogPosts = [
        { id:1, d:"2006-09-01", t:"第一天入職，感覺不錯！", b:"今天去內湖 CerebroTech 報到，主管老陳人超好，還送了我一件藍色公司服。小莎說我穿起來很專業。B4 實驗室好像很神祕，但老陳說我權限還不到。咖啡好喝！", c:[{u:"小莎", c:"老公加油！"}, {u:"阿強", c:"內湖那邊正妹多嗎？"}, {u:"老陳", c:"阿傑，歡迎加入大家庭。"}] },
        { id:2, d:"2006-09-15", t:"關於 440Hz 的專案", b:"最近在幫老陳校對一個音訊算法。他說 440Hz 是人類最舒適的頻率，但我聽久了總覺得心跳會莫名加速。小莎說我是壓力大。", c:[{u:"曉婷", c:"我也在做這個，真的怪怪的。"}, {u:"阿強", c:"我只聽 5566 的歌啦！"}] },
        { id:3, d:"2006-09-28", t:"曉婷跟我說了一些怪事", b:"曉婷今天問我有沒有聽過『Echo 計畫』。她說她在 B4 看到一些巨大的水槽。老陳剛好走過來，眼神不太對勁。晚上公司走廊的燈一直在閃。", c:[{u:"小莎", c:"別想太多，早點回家。"}, {u:"大雄", c:"Echo 計畫？聽起來很酷。"}] },
        { id:4, d:"2006-10-10", t:"國慶加班...", b:"連假還在看代碼。耳鳴變嚴重了，那聲音很有規律。老陳說這是正常反應。 [廣告：點此購買最新 MP4]", c:[{u:"老陳", c:"辛苦了，未來會感謝現在的你。"}, {u:"小莎", c:"(嘆氣) 說好的烤肉呢？"}] },
        { id:5, d:"2006-10-25", t:"這是一個奇怪的 Bug", b:"代碼裡出現一段自動錄影的腳本，但我沒寫過這段。老陳說系統正在『學習』。學習什麼？我嗎？", c:[{u:"訪客99", c:"你是誰？你在哪？"}, {u:"曉婷", c:"阿傑，別再往下查了。"}] },
        { id:6, d:"2006-11-05", t:"曉婷不見了", b:"老陳說曉婷家裡有事辭職了。但她的咖啡杯還在桌上，杯底刻著一些像數字的刮痕。我看不懂。今天公司氣氛很沉重。", c:[{u:"阿強", c:"正妹居然辭職了，嗚嗚。"}, {u:"小莎", c:"你要小心一點。"}] },
        { id:7, d:"2006-11-12", t:"我的頭好痛", b:"耳鳴變成了低語。老陳給了我一個頭盔說是紓壓用的。戴上後我看到牆壁上的代碼在流動。我是不是瘋了？", c:[{u:"老陳", c:"放鬆，讓系統引導你。"}, {u:"大雄", c:"這公司福利也太好了吧，還有紓壓頭盔？"}] },
        { id:8, d:"2006-11-20", t:"小莎，對不起", b:"忘了小莎的生日。我滿腦子都是數據流。我看著她的臉，腦中卻在計算她的像素值。我到底怎麼了？", c:[{u:"小莎", c:"你變了。"}, {u:"阿強", c:"兄弟，這真的太過分了喔。"}] },
        { id:9, d:"2006-12-01", t:"B4 的真相", b:"我進去了。曉婷就在那裡。水槽裡全是不動的人。曉婷張開眼睛，對我說快進來。這不是公司，這是收割場。", c:[{u:"Admin", c:"此評論已被系統自動刪除。"}, {u:"曉婷", c:"(空白)"}] },
        { id:10, d:"2006-12-10", t:"老陳的後頸", b:"我看見了插槽。他轉過頭對我笑，那笑容很僵硬。他已經不是老陳了，他是某種載體。我也快變成那樣了嗎？", c:[{u:"老陳", c:"阿傑，這不是毀滅，是進化。"}, {u:"訪客0", c:"救命..."}] },
        { id:11, d:"2006-12-20", t:"逃不掉了", b:"保安像機器人一樣守著。小莎打來的電話全是雜訊。我的記憶開始模糊。 010101... 誰能幫我？", c:[{u:"小莎", c:"喂？聽得到嗎？"}, {u:"大雄", c:"阿傑你到底在寫什麼？看不懂。"}] },
        { id:12, d:"2006-12-25", t:"最後的晚餐", b:"老陳說遷移日快到了。我的吉他已經被搬走了。我忘了我最喜歡什麼歌。只剩下 440Hz。", c:[{u:"阿強", c:"聖誕快樂啊，你在哪？"}, {u:"老陳", c:"倒數四天。"}] },
        { id:13, d:"2006-12-28", t:"意識緩存中", b:"身體感覺很遙遠。我正在變成一串文字。阿傑這個名字已經沒有意義了。CT-0912 準備好同步。", c:[{u:"小莎", c:"求求你，接電話。"}] },
        { id:14, d:"2006-12-30", t:"...", b:"HELP ME. [連結已損毀]", c:[{u:"訪客14", c:"<a href='javascript:void(0)' onclick='hackPrompt()'>[ 已損毀連結 ]</a>"}] },
        { id:15, d:"2006-12-31", t:"Goodbye World", b:"[歸檔] 遷移完成。2026 年見。", c:[{u:"老陳", c:"完成。"}] }
    ];

    // 為所有文章添加廣告留言
    const ads = ["【全台最強】外掛下載點我！", "這是我看過最感人的日誌 (AD)", "借錢不求人，0利率", "徵信社推薦"];
    blogPosts.forEach(p => {
        p.c.push({u:"小莎", c:"你最近真的太忙了...要注意休息啊。"});
        p.c.push({u:"老陳", c:"一切都在計畫中。"});
        p.c.push({u:"阿強", c:"下次出來打球啦！"});
        for(let i=0; i<4; i++) p.c.push({u:"AD", c:ads[i%4], s:true});
    });

    // 留言板內容 - 已大幅擴充且不重複
    const gbData = [
        {u:"小莎", c:"老公，今天晚上記得買牛奶回來喔！加油！"},
        {u:"阿強", c:"阿傑，這周末要不要去西門町萬年大樓看模型？那邊有新出的鋼彈喔。"},
        {u:"曉婷", c:"誰有《千里之外》的譜？我想練吉他~ 費玉清那段真的太難唱了XD"},
        {u:"大雄", c:"路過留個言，你的網誌風格很藍色喔。這種極簡風我喜歡。"},
        {u:"老陳", c:"阿傑，那份數據跑完了嗎？明早開會要用，辛苦了。"},
        {u:"阿強", c:"有人要去市政府跨年嗎？我有拿五月天的票！要的快及時通密我！"},
        {u:"迷路的人", c:"這首歌好好聽喔...是周董的新歌嗎？這張專輯每首都經典。"},
        {u:"AD", c:"代寫論文，專業保證，加我及時通：essay_master_99！"},
        {u:"小莎", c:"寒流來了，出門要穿外套，內湖那邊風很大喔。"},
        {u:"阿強", c:"剛剛在內湖看到你，叫你都沒聽到，是在想程式怎麼寫嗎？"},
        {u:"胖虎", c:"我是聽說這邊有音樂才點進來的，雖然沒我的歌聲好聽。"},
        {u:"靜香", c:"阿傑你好，我是大雄的朋友，這首歌的氣氛好憂鬱喔。"},
        {u:"及時通達人", c:"大家都在用及時通嗎？我的帳號是 happy_boy_2006，加我喔！"},
        {u:"神秘客", c:"00:32... 為什麼是 00:32？這秒數有什麼秘密嗎？"},
        {u:"吉他社小妹", c:"學長加油！那天在社辦聽你彈琴覺得超帥的。"},
        {u:"隔壁班阿榮", c:"聽說 CerebroTech 很難進去耶，薪水真的很高嗎？"},
        {u:"沒睡飽的工程師", c:"別提薪水了，肝比較重要... 加班到現在才看到你的日誌。"},
        {u:"小莎", c:"今天晚上我做了你愛吃的咖哩，早點回家。"},
        {u:"曉婷", c:"阿傑，B4 實驗室的門卡好像不能用了，你知道為什麼嗎？"},
        {u:"AD", c:"【限時優惠】點此領取免費遊戲點數！數量有限！"},
        {u:"阿強", c:"我買了新的 Nokia N73，拍照超清楚的，下次出來拍給你看。"},
        {u:"路人甲", c:"2006年的最後一個月了，希望明年會更好。"},
        {u:"路人乙", c:"你的計數器壞了嗎？我重新整理好幾次數字都沒變。"},
        {u:"老陳", c:"阿傑，這幾天別亂跑，專案要進入最後階段了。"},
        {u:"小莎", c:"最近你怎麼都不接電話...我有點擔心。"},
        {u:"宅男一號", c:"剛剛在 PTT 看到有人推薦這篇，特地跑過來踩踩，原 PO 加油。"},
        {u:"愛聽歌的小魚", c:"這首歌的 MV 是在老街拍的嗎？感覺好懷舊喔，想家了。"},
        {u:"MSN 愛用者", c:"阿傑，你的 MSN 怎麼一直顯示『離線』？我有急事找你耶。"},
        {u:"無名搬家工", c:"無名小站最近好卡喔，考慮要不要把網誌搬到這裡來。"},
        {u:"棒球迷", c:"昨天王建民又拿下一勝了！19勝了耶，台灣之光啦！"},
        {u:"勁舞團女王", c:"有人要一起玩勁舞團嗎？我剛練成 188 自由模式喔！"},
        {u:"魔獸玩家", c:"為了部落！阿傑你到底在哪個伺服器？一起去刷血色修道院啊。"},
        {u:"深夜電台", c:"這裡的氣氛很適合深夜一個人靜靜讀，感謝分享生活。"},
        {u:"考卷滿天飛", c:"明天要期末考了，我還在這裡看日誌，死定了啦 Q_Q"},
        {u:"及時通隱藏人", c:"我有你的及時通，但我都開隱藏看你在不在線上哈哈。"},
        {u:"懷舊小販", c:"賣最新的《不能說的秘密》電影海報，意者內洽！"},
        {u:"流浪漢", c:"內湖那家 7-11 的御飯糰漲價了，真傷心。"},
        {u:"小莎的密友", c:"阿傑，你最近對小莎好一點啦，她常跟我抱怨你變得很神祕。"},
        {u:"系統管理員", c:"[公告] 本站將於凌晨三點進行維護，請用戶及時保存數據。"},
        {u:"好奇寶寶", c:"B4 實驗室到底是做什麼的啊？我姊也在那邊上班，但她都不說。"},
        {u:"鍵盤俠", c:"樓主寫的這些是不是太科幻了點？什麼數據流、像素值的，看不懂。"},
        {u:"吉他社社長", c:"阿傑，下禮拜的成發你真的不能來嗎？大家都等你的主音耶。"},
        {u:"愛吃冰美式", c:"原來有人跟我一樣也愛喝冰美式，這種天氣喝最爽了。"},
        {u:"小莎", c:"我幫你把吉他的弦換好了，希望你回家後能彈給我聽。"},
        {u:"迷路的小羊", c:"不小心點進來的，發現這篇網誌很有意思，已經加入我的最愛。"},
        {u:"老陳", c:"計畫不能出錯，你是我最看好的工程師。"},
        {u:"曉婷的同學", c:"曉婷辭職後就聯絡不上了，她的手機也停機，有人知道她去哪了嗎？"},
        {u:"阿強", c:"我剛剛在萬年大樓看到一個超酷的頭盔，跟你描述的好像喔。"},
        {u:"不具名網友", c:"這網頁的背景音樂循環得我很不安...有人有一樣的感覺嗎？"},
        {u:"時空旅人", c:"20年後的你會後悔現在的選擇，快停下。"},
        {u:"AD", c:"想知道如何一天賺進一萬塊嗎？點此了解財富密碼。"},
        {u:"路過的校友", c:"你是 94 級的阿傑嗎？我是坐你隔壁桌的那個阿龍啊！"},
        {u:"小莎", c:"我今天在街上看到一個很像你的人，但他眼神很空洞。"},
        {u:"數據魔人", c:"01010101... 原來如此，原來這就是世界的本質。"}
    ];

    // 音樂播放器
    function playMusic() {
        triggerFault();
        audio.play().then(() => {
            audio.currentTime = 32; 
            audio.ontimeupdate = () => {
                if (audio.currentTime >= 36.9) audio.currentTime = 32;
                
                let cur = audio.currentTime;
                // 僅顯示狀態，不顯示秒數
                normalLCD.innerHTML = `[PLAYING]<br><marquee scrollamount="2" style="width:180px;">周杰倫 - 千里之外.mp3</marquee>`;
                pFill.style.width = ((cur - 32) / 4.9 * 100) + "%";
            };
        }).catch(() => {});
    }
    function pauseMusic() { audio.pause(); }
    function stopMusic() { audio.pause(); audio.currentTime = 0; pFill.style.width = "0%"; normalLCD.innerHTML = "[READY]<br>..."; }
    function triggerFault() {
        normalLCD.style.display = 'none'; errorLCD.style.display = 'block';
        setTimeout(() => { errorLCD.style.display = 'none'; normalLCD.style.display = 'block'; }, 800);
    }

    function route(page, id = null) {
        const app = document.getElementById('app');
        if (page === 'home') {
            let html = `<h3>最新日誌</h3>`;
            const list = [...blogPosts];
            if(hasReturnedFromFuture) list.push({id:99, t:"[重寫] 不要聽 440Hz", d:"2026-01-15", b:"帶小莎離開。代碼已經被我改寫，這不是結局。", c:[]});
            list.slice().reverse().forEach(p => {
                html += `<div class="post-card"><h3 onclick="route('post', ${p.id})">${p.t}</h3><div class="post-meta">${p.d} | 留言(${p.c.length})</div></div>`;
            });
            app.innerHTML = html;
        } else if (page === 'post') {
            const p = (id===99) ? {t:"[重寫] 不要聽 440Hz", b:"帶小莎離開。代碼已經被我改寫，這不是結局。", c:[]} : (blogPosts.find(x => x.id === id) || {t:"系統錯誤", b:"內容損毀", c:[]});
            let cHtml = "";
            p.c.forEach(c => {
                cHtml += `<div class="comment-item"><span class="c-user">${c.u}</span>: ${c.c} ${c.s?'<div class="spam-ad">[AD]</div>':''}</div>`;
            });
            app.innerHTML = `<button onclick="route('home')">返回</button><h2>${p.t}</h2><p style="white-space:pre-wrap;">${p.b}</p><div class="comment-area"><h4>留言</h4>${cHtml}</div>`;
        } else if (page === 'guestbook') {
            let html = `<h3>留言板</h3>`;
            gbData.forEach(g => {
                html += `<div class="comment-item"><span class="c-user">${g.u}</span>: ${g.c}</div>`;
            });
            app.innerHTML = html;
        }
    }

    function sysAlert(msg) { alert(msg); }
    function hackPrompt() {
        sysAlert("時間被安排，演一場意外");
        const pw = prompt("系統偵測到時空重疊，請輸入驗證碼：");
        if(pw === "00320036") {
            document.getElementById('retro-container').style.display = 'none';
            document.getElementById('cyber-container').style.display = 'block';
            document.body.style.background = "#000";
        }
    }
    function triggerBreach() { document.getElementById('popup-overlay').style.display = 'flex'; }
    function rebootSystem() {
        hasReturnedFromFuture = true;
        document.getElementById('popup-overlay').style.display = 'none';
        document.getElementById('cyber-container').style.display = 'none';
        document.getElementById('retro-container').style.display = 'block';
        document.body.style.background = "#455A64";
        route('home');
    }

    setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }, 1000);

    window.onload = () => {
        const fList = document.getElementById('friend-list');
        const friends = ["小莎", "阿強", "大雄", "老陳", "曉婷"];
        friends.forEach(f => fList.innerHTML += `<div style="padding:4px 0; color:#0288D1; cursor:pointer;" onclick="sysAlert('網誌已關閉')">‧ ${f}</div>`);
        route('home');
    };
</script>
</body>
</html>